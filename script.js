\n        // --- Mobile Navigation Menu Toggle ---\n        const hamburger = document.querySelector(\'.hamburger\');\n        const navMenu = document.querySelector(\'.nav-menu\');\n\n        hamburger.addEventListener(\'click\', () => {\n            hamburger.classList.toggle(\'active\');\n            navMenu.classList.toggle(\'active\');\n        });\n\n        // Close mobile menu when a link is clicked\n        document.querySelectorAll(\'.nav-link, .cta-button a\').forEach(n => n.addEventListener(\'click\', () => {\n            hamburger.classList.remove(\'active\');\n            navMenu.classList.remove(\'active\');\n        }));\n\n        // --- Active Link Highlighting on Scroll ---\n        const sections = document.querySelectorAll(\'section\');\n        const navLi = document.querySelectorAll(\'.nav-menu li a\');\n\n        window.addEventListener(\'scroll\', () => {\n            let current = \'\';\n            sections.forEach(section => {\n                const sectionTop = section.offsetTop;\n                const sectionHeight = section.clientHeight;\n                if (pageYOffset >= (sectionTop - sectionHeight / 3)) {\n                    current = section.getAttribute(\'id\');\n                }\n            })\n            \n            navLi.forEach(a => {\n                a.classList.remove(\'active\');\n                if (a.getAttribute(\'href\').includes(current)) {\n                    a.classList.add(\'active\');\n                }\n            })\n        });\n\n        // --- Dynamic Topic Dropdown for Booking Form ---\n        const serviceSelect = document.getElementById(\'service-required\');\n        const topicSelect = document.getElementById(\'topic-preferred\');\n\n        const topics = {\n            parenting: [\n                \"1).ആധുനിക കുട്ടികളും രക്ഷിതാക്കളും.\",\n                \"2). മക്കളെ അറിയാൻ.\",\n                \"3). അമ്മ അറിയാൻ.\",\n                \"4) .ആർട്ട് ഓഫ് പാരൻ്റിംഗ്.\",\n                \"5). ഉമ്മ അറിയാൻ.\"\n            ],\n            teachers: [\n                \"1). ക്വസ്റ്റ് ഫോർ ടാലൻ്റ്.\",\n                \"2). ആധുനിക കുട്ടികളും ടീച്ചേർസും.\",\n                \"3). മക്കളെ അറിയാൻ.\"\n            ],\n            student: [\n                \"1). ക്വസ്റ്റ് ഫോർ ടാലൻ്റ്.\"\n            ],\n            family: [\n                \"1). ക്വസ്റ്റ് ഫോർ ടാലൻ്റ്.\",\n                \"2). ആധുനിക കുട്ടികളും രക്ഷിതാക്കളും\",\n                \"3). അമ്മ അറിയാൻ\",\n                \"4). മക്കളെ അറിയാൻ.\",\n                \"5). ആർട്ട് ഓഫ് പാരൻ്റിംഗ്.\",\n                \"6). ഉമ്മ അറിയാൻ.\"\n            ]\n        };\n\n        serviceSelect.addEventListener(\'change\', (e) => {\n            const selectedService = e.target.value;\n            topicSelect.innerHTML = \'<option value=\"\" disabled selected>-- Select a Topic --</option>\';\n            if (selectedService) {\n                topicSelect.disabled = false;\n                const relevantTopics = topics[selectedService];\n                relevantTopics.forEach(topic => {\n                    const option = document.createElement(\'option\');\n                    option.value = topic.toLowerCase().replace(/ /g, \'-\');\n                    option.textContent = topic;\n                    topicSelect.appendChild(option);\n                });\n            } else {\n                topicSelect.disabled = true;\n            }\n        });\n\n    // --- SCRIPT FOR FORM VALIDATION, LIGHTBOX, AND SHOW MORE BUTTONS ---\n    document.addEventListener(\'DOMContentLoaded\', function() {\n        \n        // --- Form Validation Script ---\n        const dateInput = document.getElementById(\'program-date\');\n        if (dateInput) {\n            const tomorrow = new Date();\n            tomorrow.setDate(tomorrow.getDate() + 1); // Set to tomorrow\n            tomorrow.setHours(0, 0, 0, 0); // Start from midnight\n\n            const yyyy = tomorrow.getFullYear();\n            let mm = tomorrow.getMonth() + 1; // Months are 0-indexed\n            let dd = tomorrow.getDate();\n            \n            if (mm < 10) mm = \'0\' + mm;\n            if (dd < 10) dd = \'0\' + dd;\n            \n            // Format for datetime-local input (YYYY-MM-DDTHH:MM)\n            const minDateTime = `${yyyy}-${mm}-${dd}T00:00`; \n            dateInput.setAttribute(\'min\', minDateTime);\n        }\n\n        const bookingForm = document.getElementById(\'bookingForm\');\n        const submitButton = bookingForm.querySelector(\'button[type=\"submit\"]\');\n\n        const fieldsToValidate = [\n            { id: \'org-name\', required: true, message: \'This field is required.\' },\n            { id: \'head-name\', required: true, pattern: /^[a-zA-Z\\s]+$/, message: \'Please enter a valid name (letters only).\' },\n            { id: \'designation\', required: true, pattern: /^[a-zA-Z\\s]+$/, message: \'Please enter a valid designation (letters only).\' },\n            { id: \'phone\', required: true, pattern: /^\\d{10}$/, message: \'Please enter a 10-digit phone number.\' },\n            { id: \'whatsapp\', required: true, pattern: /^\\d{10}$/, message: \'Please enter a 10-digit WhatsApp number.\' },\n            // MODIFIED: Added email validation\n            { id: \'email\', required: true, pattern: /^[^\s@]+@[^\s@]+\\.[^\s@]+$/, message: \'Please enter a valid email address.\' },\n            // END MODIFIED\n            { id: \'service-required\', required: true, message: \'Please select a service.\' },\n            { id: \'topic-preferred\', required: true, message: \'Please select a topic.\' },\n            { id: \'medium\', required: true, message: \'This field is required.\' },\n            { id: \'program-date\', required: true, type: \'date\', message: \'Please select a valid date.\' },\n            { id: \'venue\', required: true, message: \'Please enter the venue.\' }\n        ];\n\n        fieldsToValidate.forEach(field => {\n            const input = document.getElementById(field.id);\n            if (input) {\n                const eventType = (input.tagName.toLowerCase() === \'select\' || input.type === \'date\') ? \'change\' : \'input\';\n                input.addEventListener(eventType, () => {\n                    validateField(input, field);\n                });\n            }\n        });\n\n        if (bookingForm) {\n            bookingForm.addEventListener(\'submit\', function(event) {\n                event.preventDefault(); \n\n                let isFormValid = true;\n                fieldsToValidate.forEach(field => {\n                    const input = document.getElementById(field.id);\n                    if (!input.disabled && !validateField(input, field)) {\n                        isFormValid = false;\n                    }\n                });\n\n                if (isFormValid) {\n                    submitButton.disabled = true;\n                    submitButton.textContent = \'Submitting...\';\n                    const formData = new FormData(bookingForm);\n\n                    // --- Using your requested pi-monitor URL ---\n// --- CHANGE THIS LINE ---\n        // OLD: fetch(\'https://pi-monitor.tailb72c55.ts.net/booking\', { \n        // NEW:\n        // Use a relative path that will be proxied by Vercel\'s configuration\n        fetch(\'/api/booking\', { \n            method: \'POST\',\n            body: formData\n        })\n                    .then(response => response.json())\n                    .then(data => {\n                        alert(data.message); \n                        if (data.message.includes(\'successfully\')) {\n                           bookingForm.reset();\n                           topicSelect.innerHTML = \'<option value=\"\" disabled selected>-- First select a service --</option>\';\n                           topicSelect.disabled = true;\n                        }\n                    })\n                    .catch(error => {\n                        console.error(\'Error:\', error);\n                        alert(\'Could not connect to the booking server. Please try again later.\');\n                    })\n                    .finally(() => {\n                        submitButton.disabled = false;\n                        submitButton.textContent = \'Submit Booking Request\';\n                    });\n                }\n            });\n        }\n        \n        function validateField(input, rules) {\n            let isValid = true;\n            let errorMessage = \'\';\n            const value = input.value.trim();\n\n            if (rules.required && !value) {\n                isValid = false;\n                errorMessage = rules.message;\n            } else if (rules.pattern && !rules.pattern.test(value)) {\n                isValid = false;\n                errorMessage = input.title || rules.message;\n            } else if (rules.type === \'date\' && value) { // This block handles \'program-date\'\n                const selectedDate = new Date(value); // Parse the datetime-local string\n                \n                const tomorrow = new Date();\n                tomorrow.setDate(tomorrow.getDate() + 1);\n                tomorrow.setHours(0, 0, 0, 0); // Set to midnight tomorrow\n\n                if (selectedDate < tomorrow) {\n                    isValid = false;\n                    errorMessage = \'Please select a date and time from tomorrow onwards.\'; // Updated error message\n                }\n            }\n\n            if (isValid) {\n                clearError(input);\n            } else {\n                showError(input, errorMessage);\n            }\n            return isValid;\n        }\n\n        function showError(input, message) {\n            const formGroup = input.parentElement;\n            const errorDiv = formGroup.querySelector(\'.error-message\');\n            input.classList.add(\'invalid\');\n            errorDiv.textContent = message;\n            errorDiv.classList.add(\'visible\');\n        }\n\n        function clearError(input) {\n            const formGroup = input.parentElement;\n            const errorDiv = formGroup.querySelector(\'.error-message\');\n            input.classList.remove(\'invalid\');\n            if (errorDiv) {\n                errorDiv.classList.remove(\'visible\');\n                errorDiv.textContent = \'\';\n            }\n        }\n\n        // --- Universal Lightbox Script ---\n        const lightbox = document.getElementById(\'lightbox\');\n        const lightboxImg = document.getElementById(\'lightbox-img\');\n        const closeBtn = document.querySelector(\'.lightbox-close\');\n        \n        // This selector now finds images in BOTH the gallery and poster sections\n        const clickableImages = document.querySelectorAll(\'#gallery .gallery-item img, #posters .poster-item img\');\n\n        clickableImages.forEach(img => {\n            img.addEventListener(\'click\', function() {\n                lightbox.style.display = \'block\';\n                lightboxImg.src = this.src;\n            });\n        });\n\n        function closeLightbox() {\n            lightbox.style.display = \'none\';\n        }\n\n        closeBtn.addEventListener(\'click\', closeLightbox);\n        lightbox.addEventListener(\'click\', function(e) {\n            if (e.target === lightbox) {\n                closeLightbox();\n            }\n        });\n\n        // --- Show More Gallery Script ---\n        const showMoreBtn = document.getElementById(\'showMoreBtn\');\n        const hiddenGalleryItems = document.querySelectorAll(\'#gallery .gallery-item.hidden\');\n\n        if (showMoreBtn) {\n            showMoreBtn.addEventListener(\'click\', function() {\n                hiddenGalleryItems.forEach(item => {\n                    item.classList.remove(\'hidden\');\n                });\n                showMoreBtn.style.display = \'none\'; \n            });\n        }\n\n        // --- NEW: Show More Posters Script ---\n        const showMorePostersBtn = document.getElementById(\'showMorePostersBtn\');\n        const hiddenPosterItems = document.querySelectorAll(\'#posters .poster-item.hidden\');\n\n        if (showMorePostersBtn) {\n            showMorePostersBtn.addEventListener(\'click\', function() {\n                hiddenPosterItems.forEach(item => {\n                    item.classList.remove(\'hidden\');\n                });\n                showMorePostersBtn.style.display = \'none\';\n            });\n        }\n\n    });\n